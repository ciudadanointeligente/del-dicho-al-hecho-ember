
{{yield}}
<section id="estudio">
<div class="container">
<div class="row">
  <div class="page-header">
    <h1 class="text-center">{{study.name}}</h1>
  </div>
  <div class="col-md-10 col-md-offset-1">
    <div class="bajada">
      <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget. <a href="" class="btn btn-danger btn-xs" target="_blank" onclick="ga('send','event','metodologia-pdf','click')">Ver metodología</a></p>
    </div>
  </div>
  <div class="col-md-4 text-center hidden-sm hidden-xs">
    <div class="total-result cumplimientos">
      <div class="text-center promise-result home">{{c.total}}</div>
      <p class="text-center">{{study.fullfilment}}%</p>
    </div>
    <h3>cumplimiento total <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Porcentaje que indica el promedio de avance de todas las promesas contenidas en el estudio"></i></h3>
  </div>
  <div class="col-md-4 text-center">
    <div class="chart">
      {{ember-chart type='doughnut' data=study.chartData options=study.doughnutOpt height=150}}
    </div>
  </div>
  <div class="col-md-4 text-center hidden-md hidden-lg ">
    <div class="total-result cumplimientos">
      <div class="text-center promise-result home">{{c.total}}</div>
      <p class="text-center">{{study.fullfilment}}%</p>
    </div>
    <h3>cumplimiento total <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Porcentaje que indica el promedio de avance de todas las promesas contenidas en el estudio"></i></h3>
  </div>
  <div class="col-md-4 text-center">
    <div class="total-result cumplimientos">
      {{ study.coherenceLevel }}
    </div>
    <h3>coherencia <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Número que indica el promedio de consistencia de todas las promesas respecto a los proyectos de ley enviados al Congreso."></i></h3>
  </div>
</div>

<div class="row">
  <div class="col-md-3 text-center">
    <h3 class="sub">Total de promesas</h3>
    <div class="total-result sub">
      {{study.promises.length}}
    </div>
  </div>
  <div class="col-md-3 text-center">
    <h3 class="sub">Total de proyectos enviados</h3>
    <div class="total-result sub">
      {{study.billsCount}}
    </div>
  </div>
  <div class="col-md-3 text-center">
    <h3 class="sub">Capacidad <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Indicador que señala el número de promesas que presentan puntuación máxima en su nivel de avance (100%) y su grado de coherencia (4)."></i></h3>
    <div class="total-result sub">
      {{study.capacity}}
    </div>
  </div>
  <div class="col-md-3 text-center">
    <h3 class="sub">Total de urgencias <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Es la suma de todas las urgencias asociadas a los proyectos de ley contenidos en el estudio."></i></h3>
    <div class="total-result sub">
      {{study.urgenciesCount}}
    </div>
  </div>
</div>

<div class="panel panel-default legend">
  <div class="row">
    <div class="col-md-9">
      <h4>Áreas</h4>
    </div>
    <div class="hidden-xs hidden-sm col-md-3 text-center">
      <div class="row">
        <div class="col-md-6">
          <h5>Avance del área <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Porcentaje que indica el promedio del cumplimiento de las promesas que pertenecen a un área determinada."></i></h5>
        </div>
        <div class="col-md-6">
          <h5>Coherencia del área</h5>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-body">
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
      {{#each-in study.promisesGroupedByArea as |area_id a|}}
      <div class="panel panel-default">
        <div id="headingOne-{{a.area.id}}" class="collapsed panel-heading" role="button" data-toggle="collapse" data-parent="#accordion" href="#cumplimiento-{{a.area.id}}" aria-expanded="false" aria-controls="cumplimiento-">
          <div class="row">
            <div class="col-md-4">
              <h4>
                <span>
                  {{a.area.name}}
                </span>
              </h4>
              <div class="sec-promesas">
                <h5><b>{{a.promises.length}} promesa(s)</b><br>({{a.summary.completed}} completas - {{a.summary.in_progress}} en proceso - {{a.summary.no_progress}} sin progreso)</h5>
              </div>
            </div>
            <div class="col-md-5">
              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="{{a.summary.fullfilment}}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: {{a.summary.fullfilment}}%; background-color: {{study.government.color1}}"></div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6">
                  <p class="hidden-md hidden-lg text-center">Avance del área <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Porcentaje que indica el promedio del cumplimiento de las promesas que pertenecen a un área determinada."></i></p>
                  <div class="category-result text-center">
                    {{a.summary.fullfilment}}%
                  </div>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6">
                  <p class="hidden-md hidden-lg text-center">Coherencia del área</p>
                  <div class="category-result text-center">
                    {{a.summary.coherenceLevel}}
                  </div>
                </div>
              </div>
            </div>
          </div><!--row-->
        </div><!--panel-heading-->
        <div id="cumplimiento-{{a.area.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne-{{a.area.id}}" >
          <div class="panel-body">
            {{#each a.promises as |p|}}
            <div class="panel-promise">
              <div class="row">
                <div class="col-md-9">
                  <h4>{{p.title}}</h4>
                  <p>{{p.content}}</p><br>
                  {{#if p.bills.length}}
                    <p style="float: left;"><span>Proyectos asociados </span></p>
                    {{#each p.bills as |b|}}
                    <button type="button" class="btn btn-success btn-xs" data-toggle="modal" data-target="#myModal-proyecto-{{a.id}}-{{b.id}}">Proyecto {{b.name}}</button>
                    <!-- modal project -->
                    <div class="modal fade" id="myModal-proyecto-{{a.id}}-{{b.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <span class="label label-default ng-binding">Proyecto {{b.name}}</span>
                            <h4 class="modal-title" id="myModalLabel">{{b.title}}</h4>
                          </div>
                          <div class="modal-body">
                            <p><span>Estado de avance:</span> {{b.phase.name}}</p>
                            {{b.justifications}}
                          </div>
                          <div class="modal-footer">
                            <a class="btn btn-success-inverse project" href="{{b.url}}" target="_blank">Ir al proyecto</a>
                          </div>
                        </div>
                      </div>
                    </div>
                    {{/each}}
                    <p><span>Total de urgencias</span> <span class="badge">{{p.urgenciesCount}}</span></p>
                  {{/if}}
                </div>
                <div class="col-md-3">
                  <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6">
                      <p class="text-center">Avance de la promesa <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Porcentaje que indica el nivel de cumplimiento de una promesa presidencial, en su estado de tramitación en el Congreso" tooltip></i></p>
                      <div class="promise-result text-center">
                        {{p.fullfilment}}%
                      </div>
                      <p class="text-center"><a href="#" data-toggle="modal" data-target="#myModal-cumplimiento-{{a.id}}-{{p.id}}">¿Por qué?</a></p>
                      <!-- modal cumplimiento -->
                      <div class="modal fade" id="myModal-cumplimiento-{{a.id}}-{{p.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-body">
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                              <h4 class="modal-title" id="myModalLabel">{{p.fullfilment}}% de avance - ¿Por qué?</h4>
                              {{p.ja_why}}
                            </div>
                            <div class="modal-body">
                              <h4 class="modal-title" id="myModalLabel">{{p.coherenceLevel}}/4 escala de coherencia - ¿Por qué?</h4>
                              {{p.jc_why}}
                            </div>
                            <div class="modal-body">
                              {{#if p.bills.length}}
                              <h4 class="modal-title" id="myModalLabel">Proyectos de ley asociados</h4>
                              <div class="row"><!---Projects-->
                                {{#each p.bills as |b|}}
                                <div class="col-md-12 project-list">
                                  <span class="label label-default ng-binding">Proyecto {{b.name}}</span>
                                  <h5 class="modal-title" id="myModalLabel">{{b.title}}</h5>
                                  <p><span>Estado de avance:</span> {{b.phase.name}}</p>
                                  <a class="btn btn-success-inverse btn-xs" href="{{b.url}}" target="_blank">Ir al proyecto</a>
                                </div>
                                {{/each}}
                              </div>
                              {{/if}}
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- modal coherence -->
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6">
                      <p class="text-center">Coherencia de la promesa <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Indicador que determina el grado de consistencia entre los contenidos de una promesa presidencial y un proyecto de ley enviado al Congreso" tooltip></i></p>
                      <div class="promise-result text-center">
                        {{p.coherenceLevel}}
                      </div>
                      <p class="text-center"><a href="#" data-toggle="modal" data-target="#myModal-coherencia-{{a.id}}-{{p.id}}">¿Por qué?</a></p>
                      <!-- modal coherence -->
                      <div class="modal fade" id="myModal-coherencia-{{a.id}}-{{p.id}}" role="dialog">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-body">
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                              <h4 class="modal-title" id="myModalLabel">{{p.fullfilment}}% de avance - ¿Por qué?</h4>
                              {{p.ja_why}}
                            </div>
                            <div class="modal-body">
                              <h4 class="modal-title" id="myModalLabel">{{p.coherenceLevel}}/4 escala de coherencia - ¿Por qué?</h4>
                              {{p.jc_why}}
                            </div>
                            <div class="modal-body">
                              {{#if p.bills.length}}
                              <h4 class="modal-title" id="myModalLabel">Proyectos de ley asociados</h4>
                              <div class="row"><!---Projects-->
                                {{#each p.bills as |b|}}
                                <div class="col-md-12 project-list">
                                  <span class="label label-default ng-binding">Proyecto {{b.name}}</span>
                                  <h5 class="modal-title" id="myModalLabel">{{b.title}}</h5>
                                  <p><span>Estado de avance:</span> {{b.phase.name}}</p>
                                  <a class="btn btn-success-inverse btn-xs" href="{{b.url}}" target="_blank">Ir al proyecto</a>
                                </div>
                                {{/each}}
                              </div>
                              {{/if}}
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- modal coherence -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {{else}}
            <p>No hay promesas que mostrar para esta área</p>
            {{/each}}
          </div><!--panel-body-->
        </div><!--cumplimiento-->
      </div><!--panel default-->
      {{else}}
      <p>No hay áreas que mostrar</p>
      {{/each-in}}
    </div>
  </div>
</div>
</div>
</section>
